# 命令型エラー処理の問題点
## 例外を投げる関数は、以下のような問題点があります。

- そのほかの関数とは違い、合成やチェーン化ができない
- 関数の計算結果が単一の予測可能な値になる参照透過性の原則に違反する。例外を投げることで、呼び出した関数の出口パスの数が増えてしまう
- 予期しないスタックの巻き戻しは、関数呼び出しだけでなくシステム全体に影響を及ぼすため、副作用が発生する原因となる
- エラーから回復するためのコードは、その原因となる関数呼び出しから離れているため、局所性の原則<sup>*1</sup>に違反する。例外が投げられた場合、関数はローカルスタックの環境を抜ける
- ただ単に関数の戻り値だけで処理を進めるのではなく、`catch`ブロックで例外の後処理をさせる宣言を行うため、呼び出し元に大きな責任を負わせる
- 複数のエラー条件が発生して例外処理が入れ子になるような場合、扱いづらい

> JavaScriptで頻繁に発生する例外は、`null`オブジェクトに対して関数を呼び出すときに発生する、悪名高い TypeError です。

<sup>\*1 局所性は、時間的にも空間的にも生じるが、ここでは、エラーの原因となる関数のコードと、catch文内の「回復するためのコード」が離れていることによって、空間的局所性の原則に反すると筆者は述べている。</sup>
