# 第１章　オブジェクト指向の基本を学ぶ
## オブジェクト指向の発想
### オブジェクト指向の良さ

### オブジェクト指向は部品指向

- 機能追加は、新しい部品（オブジェクト）の追加を考える
- 修正は、部品の差し替えを考える

こういう発想でソフトウェアを育てていくのがオブジェクト指向の基本の発想です。

### 動的に組み立てる

オブジェクト指向プログラミングはもっと動的です。プログラムをメモリ上で実行する時にオブジェクト（部品）の組み立て方や結びつき方を動的にコントロールします。

## Hello, World!

- [**リスト1 HelloWorld.java**](list-1_HelloWorld.java)
- [**リスト2 Launcher.java**](list-2_Launcher.java)
- [**リスト3 Service.java**](list-3_Service.java)

## もう少しまともな挨拶を
- [**リスト4 GreetingProcedural.java**](list-4_GreetingProcedural.java) 手続き型で書いた例


### 手続き型オブジェクト思考の発想の違い
オブジェクト指向では、分割の単位が「手続き」ではなく「オブジェクト」になります。<br>
オブジェクトに分割して、それぞれのオブジェクトに分担してやってもらう、という発想です。

- [**リスト5 GreetingServiceStructured.java**](list-05_GreetingServiceStructured.java) リスト4をメソッドに分割して、構造化プログラミングのスタイルで書き直した

### オブジェクトで仕事を分担する
<img width="80%" src="https://user-images.githubusercontent.com/4797793/197332668-9bc5b5c5-d101-4a8c-a47f-9a5f876421d4.jpg">

- [**リスト6 Launcher.java**](list-6_Launcher.java)
- [**リスト7 GreetingService.java**](list-7_GreetingService.java)
- [**リスト8 Transfer.java**](list-8_Transfer.java)
- [**リスト9 User.java**](list-9_User.java)
- [**リスト10 Greeting.java**](list-10_Greeting.java)
- [**リスト11 AmPm.java**](list-11_AmPm.java)
- [**リスト12 Clock.java**](list-12_Clock.java)
- [**リスト13 GreetingFormat.java**](list-13_GreetingFormat.java)

### LauncherとGreetingServiceの分離
プログラムの軌道と、サービスの実行を別のオブジェクトに分けるのは定石ですね。<br>
プログラムを起動する `main` メソッドや`main`メソッドを持つクラスに、それ以外の仕事を詰め込んではいけません。

### Userオブジェクト

### Transferオブジェクト

### パッケージの分割
`Launcher`、`GreetingService`、`User`、`Transfer`を、「**サービスパッケージ**」にまとめました。<br>
`Greeting`、 `AmPm`、`Clock`、`GreetingFormat`は、「**モデルパッケージ**」にまとめました。<br>
**サービスパッケージ**は、アプリケーションの実行方式や実行環境に依存したコードがいろいろ含まれています（Systemクラスとか）。<br>
**モデルパッケージ**は「挨拶する」という概念モデルをそのまま実装したパッケージです。<br>
<br>
プログラムの実行環境や実行方式に関した変更は、サービスパッケージで行います。

### Greetingオブジェクト

### AmPmオブジェクトとClockオブジェクト

### GreetingFormatオブジェクト

## 小さなオブジェクトで仕事を組み立てる
小さなオブジェクトに単純な仕事を役割分担させるスタイルだと、変更すべき箇所は明確だし、変更が局地的になり、副作用の心配が激減します。

## オブジェクトの作成
オブジェクト指向プログラミングでは、オブジェクトを「誰」が「いつ」作成するかは、重要な設計課題です。

### クラス図の表現、コードの実装
- 実践は、コンストラクタで`new`している
- 破線は、メソッドで`new`している

### 結びつきの強さ
|線|説明|
|:-|:-|
|実線|コンストラクタで、仕事を頼むオブジェクトを作成しています|
|破線|メソッドが呼ばれたときに、一時的にオブジェクトを準備します。メソッドが終了すれば仕事の依頼先のそのオブジェクトは不要になります。|

## getter/setterを安易に使わない
Javaでは、`getName()`、 `setName()`というように、getとsetをペアにしたメソッドを用意することが半ば習慣化しています。<br>
これは悪い癖です。本当に必要になるまでは、できるだけget/setは書かないようにするのが、オブジェクト指向らしいプログラムをするコツの1つです。

## if文とfor文を減らす
わけのわからないバグで苦しむのは、だいたいが、if文やfor文が入り組んだ場所です。

### 列挙型（enum）

- [**リスト 14 MessageType.java**](list-14_MessageType.java)
- [**リスト 15 AmPm.java**](list-15_AmPm.java) if文をなくした版

### インターフェース宣言と実装クラス
<img width="80%" src="https://user-images.githubusercontent.com/4797793/197333696-996120e2-a04c-4077-92a1-932b920d3786.png">

- [**リスト16 MessageType.java**](list-16_MessageType.java)
- [**リスト17 Message.java**](list-17_Message.java)
- [**リスト18 MessageAm.java**](list-18_MessageAm.java)
- [**リスト19 MessagePm.java**](list-19_MessagePm.java)

> 仕事を頼む側から見ると、同じ型に見えるが、実態は異なるオブジェクトというのが、オブジェクト指向プログラミングの根幹のしくみの１つです。<br>
> オブジェクトとオブジェクトの関係を固定ではなく、動的に切り替えるしくみとして、異なる実装クラスのオブジェクトを同じ型として使うことができるのは、実に強力なしくみです。

### デザインパターン
インターフェース宣言と実装クラスのしくみは、GoFの「デザインパターン」を勉強すると良いでしょう。<br>
とくにStrategy/Stateパターンは、使う場面も多く必修です。

### コレクションフレームワークAPIに精通する

- SetやMapを使う
- Comparatorを実装する
- Collectionsユーティリティクラスを使う
- TreeSet、LinkedHashSetを使う

### ファーストクラスコレクション

### オブジェクト指向の基本スキル

オブジェクト指向の基本という意味で、列挙型、インターフェース宣言、ファーストクラスコレクションは必修科目だと思います。<br>
複雑なif文やfor文を書くことが、オブジェクト指向プログラミングの基本スキルではないんです。

### オブジェクト指向の学び方

オブジェクト指向プログラミングとは、モデリング（分析）、設計、そしてリファクタリング（設計の改良作業）が、渾然一体となったものです。<br>
分析は分析、設計は設計、プログラミングはプログラミング、という発想・やり方だと、オブジェクト指向の良さは出てきません。

良い名前やオブジェクトの役割分担を考えるのは、分析やモデリングの作業です。<br>

動くものを作ってからがプログラミングの本番です。地道にリファクタリングを繰り返し、より良い設計を模索することが、オブジェクト指向プログラミングの習慣であるべきです。

### 本を読む
オブジェクト指向プログラミングは、数式を組み立てるよりも、文章を組み立てる活動と似ています。
頭の中にある漠然としたイメージを適切な言葉を選びながら、だんだん論理的な文章に組み上げていく。それがオブジェクト指向プログラミングです。

### クラス図のラフスケッチ

### 参考書

- 『リファクタリング』（マーチンファウラー著） - 丁寧に実践すると、オブジェクトは小さく分割され、各オブジェクトの役割が単純になる傾向があります
- 『実装パターン』（ケント・ベック著） - クラスやメソッドにどういう名前をつけるべきかのガイドラインがたくさん書かれています
- 『Effective Java第２版』（Joshua Bloch著）
- 『ドメイン駆動設計』（エリック・エバンス著） - オブジェクト思考設計を学ぶ
- 『オブジェクトデザイン』（レベッカ・ワーフスブラック著）
- 『実践UML 第３版』（クレーグ・ラーマン著）

### 「創造的な学び」をデザインする
技術を学ぶときに、ぜひ参考にしてほしいのが、慶應大学SFCの井庭研究室が作成した、[学習パターン](http://web.sfc.keio.ac.jp/~iba/patterns_j/index.html)です。

### プロトタイピング
<img width="250" alt="スクリーンショット 2022-10-22 20 07 35" src="https://user-images.githubusercontent.com/4797793/197335928-9b3ea58c-8b13-4ba3-8149-5cc8d2beb6c1.png">

### 「まねぶ」ことから
<img width="250" alt="スクリーンショット 2022-10-22 20 07 42" src="https://user-images.githubusercontent.com/4797793/197335936-5a16eb6c-ffdf-4a64-899b-2a81cce79251.png"><br>
まずは真似てみましょう。たいせつなのは「真」に似せることです。

### 広がりと掘り下げの「T字」
<img width="250" alt="スクリーンショット 2022-10-22 20 07 50" src="https://user-images.githubusercontent.com/4797793/197335958-1cf111f6-35e6-41f1-aa44-4075170ae894.png"><br>
- 何かを掘り下げようと思ったら、幅広くいろいろなことに目を向ける
- いろいろなことを知りたかったら、1つのことをじっくり掘り下げる


### 鳥の眼、虫の眼

<img width="250" alt="スクリーンショット 2022-10-22 20 07 58" src="https://user-images.githubusercontent.com/4797793/197335972-37617123-2026-4656-9ea7-a39a856a606c.png"><br>

全体を眺める鳥の眼と、部分を詳細に見る虫の目を両方を持つこと。
たいせつなのは、両方の見方を、しょっちゅう行ったり来たりすること。

## 終わりに



